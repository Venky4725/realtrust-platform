<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>
  <style>
    * { font-family: Arial, sans-serif; box-sizing: border-box; }
    body { margin: 0; background: #f4f6f9; }

    .sidebar {
      width: 220px;
      height: 100vh;
      background: #1e293b;
      color: white;
      position: fixed;
      padding: 20px;
    }
    .sidebar h2 { text-align: center; margin-bottom: 30px; }
    .sidebar a {
      display: block;
      color: white;
      text-decoration: none;
      padding: 10px;
      margin: 5px 0;
      border-radius: 5px;
    }
    .sidebar a:hover { background: #0d6efd; }

    .main {
      margin-left: 240px;
      padding: 20px;
    }

    .card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }

    input, textarea, button {
      width: 100%;
      padding: 10px;
      margin: 6px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background: #0d6efd;
      color: white;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover { background: #084298; }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    th { background: #0d6efd; color: white; }
  </style>
</head>
<body>

<div class="sidebar">
  <h2>Admin Panel</h2>
  <a href="#projects">Projects</a>
  <a href="#clients">Clients</a>
  <a href="#contacts">Contacts</a>
  <a href="#subs">Subscribers</a>
</div>

<div class="main">

  <!-- PROJECTS -->
  <div class="card" id="projects">
    <h2>Add Project</h2>
    <input id="pname" placeholder="Project Name">
    <textarea id="pdesc" placeholder="Project Description"></textarea>
    <input type="file" id="pimage">
    <button onclick="addProject()">Add Project</button>
  </div>

  <!-- CLIENTS -->
  <div class="card" id="clients">
    <h2>Add Client</h2>
    <input id="cname" placeholder="Client Name">
    <textarea id="cdesc" placeholder="Client Description"></textarea>
    <input id="cdesign" placeholder="Designation">
    <input type="file" id="cimage">
    <button onclick="addClient()">Add Client</button>
  </div>

  <!-- CONTACTS -->
  <div class="card" id="contacts">
    <h2>Contact Form Data</h2>
    <button onclick="loadContacts()">Load Contacts</button>
    <table id="contactsTable"></table>
  </div>

  <!-- SUBSCRIBERS -->
  <div class="card" id="subs">
    <h2>Newsletter Subscribers</h2>
    <button onclick="loadSubscribers()">Load Subscribers</button>
    <table id="subsTable"></table>
  </div>

</div>

<script>
const BACKEND_URL = "https://realtrust-backend-tqtl.onrender.com";


// Add Project
function addProject() {
  const formData = new FormData();
  formData.append("name", pname.value);
  formData.append("description", pdesc.value);
  formData.append("image", pimage.files[0]);

  fetch(BACKEND_URL + "/api/projects", { method: "POST", body: formData })
  .then(res => res.json())
  .then(() => alert("Project added successfully!"));
}

// Add Client
function addClient() {
  const formData = new FormData();
  formData.append("name", cname.value);
  formData.append("description", cdesc.value);
  formData.append("designation", cdesign.value);
  formData.append("image", cimage.files[0]);

  fetch(BACKEND_URL + "/api/clients", { method: "POST", body: formData })
  .then(res => res.json())
  .then(() => alert("Client added successfully!"));
}

// Load Contacts
function loadContacts() {
  fetch(BACKEND_URL + "/api/contacts")
  .then(res => res.json())
  .then(data => {
    let html = "<tr><th>Name</th><th>Email</th><th>Mobile</th><th>City</th></tr>";
    data.forEach(c => {
      html += `<tr><td>${c.name}</td><td>${c.email}</td><td>${c.mobile}</td><td>${c.city}</td></tr>`;
    });
    contactsTable.innerHTML = html;
  });
}

// Load Subscribers
function loadSubscribers() {
  fetch(BACKEND_URL + "/api/subscribers")
  .then(res => res.json())
  .then(data => {
    let html = "<tr><th>Email</th></tr>";
    data.forEach(s => {
      html += `<tr><td>${s.email}</td></tr>`;
    });
    subsTable.innerHTML = html;
  });
}
</script>

</body>
</html>
